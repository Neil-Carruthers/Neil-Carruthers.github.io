{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/react-proxy/","result":{"pageContext":{"title":"Send API Requests From React to Express During Development","date":"August 15, 2021","html":"<p>For an e-commerce application I'm working on I have a React client and an Express server and I needed some way of testing the Stripe checkout component during development.  In production, Heroku provides the Express server with a dynamic port number and when it serves the React application the client can correctly call the following code and have it routed to the appropriate port:</p>\n<figure>\n    <pre>\n<span>axios({\n    url: 'payment',\n    method: 'post',\n    data: {\n        amount: priceForStripe,\n        token\n    }\n})<span></pre>\n    <figcaption>components/stripe-button/stripe-button.component.jsx</figcaption>\n</figure>\n<p>However, during development, my Express server and my React application were being served from two separate ports on localhost and I needed a way to ensure that API calls made to my POST endpoint were able to find the correct port.  I needed a proxy:</p>\n<figure>\n    <pre><span>\"proxy\": \"http://localhost:5000\",<span></pre>\n    <figcaption>client/package.json</figcaption>\n</figure>\n<figure>\n    <pre><span>const port = process.env.PORT || 5000;<span></pre>\n    <figcaption>server.js</figcaption>\n</figure>\n<p>By providing the full address of the Express development server through a \"proxy\" key in the package.json file of the React application, the client knows to pass all unhandled requests to the Express server for processing.  In production, the Express server uses the PORT variable provided to it by the Heroku dyno, but in development it uses 5000, which is available to React through the proxy.</p>"}},"staticQueryHashes":["63159454"],"slicesMap":{}}